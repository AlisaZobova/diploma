<?php

namespace App\Facades\OpenAI\Test;

use App\Facades\OpenAI\Contracts;
use App\Facades\OpenAI\Enums;
use Illuminate\Support\Facades\Process;

class Accessor implements Contracts\OpenAIContract
{
    public const MODEL = Enums\Model::ADA_002;

    public function createEmbedding(Enums\Model $model, string $input): Contracts\EmbeddingContract
    {
        $embedding = [];
        for ($i = 0; $i < 1536; $i++) {
            $embedding[] = fake()->randomFloat(10, -1, 1);
        }

        //        $embedding = [0.05342037, 0.604420903, -0.5941401802, 0.3104756751, 0.8136209724, 0.8302309829, 0.0158023709, -0.3104076531, 0.0115116569, -0.5902216982, 0.1005598517, 0.6205220947, 0.4994368542, 0.4171855279, -0.2730818043, -0.1748202775, 0.001682472, 0.4596996109, -0.7116379941, -0.6589281725, -0.4900127843, 0.0534759793, 0.3606012023, 0.727490682, -0.8070487677, 0.1702194881, -0.8249016226, -0.798558073, 0.2135332782, 0.019007714, 0.2465069486, -0.3205465951, -0.191812676, -0.6513659962, 0.8234404185, -0.7134253046, -0.3206721727, -0.2039986184, -0.8049112483, 0.8850204851, 0.7012446717, -0.3665938747, -0.1760216677, -0.2366879411, 0.0300073517, 0.8995745312, -0.4479070117, 0.3883011627, 0.6184394386, -0.7603877093, -0.2920613109, 0.5256976371, -0.8328853388, -0.9438036605, -0.2002241747, -0.5586826809, 0.663635535, 0.9004236822, 0.4242530882, 0.1028787918, -0.0661770697, 0.8934948565, -0.9136131322, -0.0667174836, -0.1301615374, 0.572190211, 0.4155423508, -0.461903393, 0.0766909779, -0.2385316739, 0.7525491536, 0.8678166735, -0.3637327009, 0.7162302256, -0.3928183473, -0.7620762194, 0.5467160836, -0.0380913993, 0.3829171152, 0.3587850916, -0.0953276749, -0.6890206634, 0.0030682371, -0.9393416149, 0.3233409372, 0.2691168232, -0.6943718147, -0.5333794912, 0.8770981253, 0.5672980359, -0.9189111879, -0.0654171664, -0.602171406, 0.5843966257, -0.7241080532, 0.7415548189, 0.4369122244, -0.222311664, 0.8280839761, -0.8451502341, -0.4159874084, -0.8717239526, 0.5373354785, -0.9972674176, -0.7757584992, 0.7672534156, -0.1011543139, -0.7358475894, 0.3749292555, -0.9111032681, 0.7721314429, 0.9015007289, 0.270460487, -0.2786240742, 0.2683068464, 0.4254158779, 0.1336569372, -0.1570394659, 0.251674608, -0.4105074878, -0.6056358244, -0.7937631699, 0.767368812, -0.9586695311, -0.6007877633, -0.593685828, -0.0072350265, -0.4332235946, -0.0359176272, 0.6839991611, -0.7019031438, 0.0979024056, -0.0426219539, 0.1894888697, 0.0136673781, -0.9518248942, 0.0533079016, 0.6689817829, 0.2438294875, 0.3155992, -0.9944917159, 0.4645406592, 0.2027245272, 0.6174912181, 0.0348864948, -0.8133747512, 0.274775175, 0.3529072522, -0.0794578591, 0.9013134464, 0.5083693608, -0.200286795, 0.8820389117, -0.8263465547, 0.2591690604, 0.5816008661, 0.6024566738, -0.1511735204, -0.7635208367, 0.8841958958, -0.1752549909, -0.0311617092, 0.238267074, -0.5088081656, -0.2386715092, -0.203991437, 0.072932866, -0.0488201953, 0.2085898114, 0.5000555466, -0.3702928216, 0.1405738197, 0.0432046759, -0.1812331766, 0.9001389881, -0.0470619654, 0.9573600748, 0.6135070285, -0.1470446871, -0.6459786164, 0.3933157117, 0.6283438875, 0.00246889, -0.4762714559, -0.9827590231, -0.1162706283, -0.0816809056, -0.7068287496, 0.6506400777, 0.3949304043, 0.005387153, 0.6855294666, -0.4651645867, 0.6078212213, 0.0467883502, -0.9172303443, -0.498808855, -0.1726714061, 0.118092489, 0.3408223201, 0.8482214258, 0.5118394054, 0.781603733, -0.977399677, 0.5211670024, -0.0411190544, -0.5934264909, -0.8507075253, -0.7299111279, -0.0020749331, 0.1413759799, 0.6602842899, 0.5851718744, -0.7538509684, 0.6384380728, 0.0577652925, 0.3302019496, 0.6916663422, 0.4151627288, -0.1106947582, -0.9933554409, 0.8715359205, 0.4136356103, -0.2027190221, -0.046759631, 0.469835473, 0.6221779257, 0.2876317945, -0.5360949037, 0.4186878127, -0.9481476396, 0.9621366886, 0.6511223203, 0.3461420831, 0.1905243114, 0.7399322976, -0.8990803221, -0.3751379388, 0.3877028019, 0.9585990058, 0.2395850193, 0.6715728266, 0.5449026178, 0.302361516, 0.5239411339, -0.3500003579, 0.3835972144, 0.1339926464, 0.6480755627, 0.8922126712, 0.6612568924, -0.8209541951, 0.8627399159, -0.1979087047, -0.4836944367, 0.2272482222, 0.7107155648, 0.1324665216, 0.7211129124, 0.6149479214, 0.5859796813, -0.1854873445, -0.3853244825, -0.707694657, -0.8342710537, -0.5322487464, -0.1859971765, 0.1764410088, -0.2975948003, 0.9207344921, 0.299162462, 0.0667803581, 0.9239891171, 0.3937937959, -0.6355681492, -0.2698209832, 0.8856015941, -0.0945385895, 0.7571713327, 0.3573098925, -0.3577871068, -0.2638335551, -0.4102662063, 0.7855984484, -0.6699349655, -0.6759923313, -0.2345952276, -0.061138771, 0.7134658944, -0.4806186396, -0.8811523308, -0.5222351856, -0.578551702, 0.8053100062, 0.6398551677, -0.880077159, -0.6163167933, 0.172406768, 0.010348191, -0.4254077624, 0.345096477, 0.6251924865, 0.432345146, 0.4275834195, -0.8010364993, -0.5286527749, 0.0186176025, 0.5640127182, 0.1834676942, -0.310313001, 0.6966656045, -0.3696327058, -0.0820925949, 0.8899732287, 0.2237599442, 0.256054564, 0.6508899711, -0.6813305177, -0.4378723229, 0.2963547908, 0.3834953976, -0.8029176229, 0.2372809729, -0.8884108755, -0.2477252815, 0.1155836001, -0.0104743061, -0.5304866366, 0.9120706822, 0.798995179, 0.5185294177, 0.7629850943, -0.9022206133, 0.3413307487, -0.0220068605, -0.868116511, 0.7881123516, 0.89123864, -0.6541042811, 0.0151334484, 0.2414304517, -0.5914540112, 0.5093476295, 0.7863518017, -0.1335559772, -0.554628656, 0.7668258705, -0.2938745149, -0.5162226164, 0.8625105554, -0.1120209243, -0.894897229, -0.0302925068, -0.6549341183, 0.5062651492, 0.5343940656, 0.4208955473, -0.1860163161, 0.8610693272, -0.2461487228, -0.3543207093, 0.4579011954, 0.2686453747, 0.2801670773, -0.1014655517, -0.8508044704, 0.0421317849, 0.7280403533, 0.1626524977, -0.5615296716, -0.5514744444, -0.5893496562, 0.0600593067, -0.6149586661, -0.2133398658, -0.4577620372, 0.117615704, 0.5915232383, -0.2064831104, 0.001641152, 0.3707426765, -0.6196945271, -0.6911804032, 0.8684829072, -0.5585167471, 0.2268883592, -0.2366587218, -0.8598266411, 0.8241740911, 0.4885235249, 0.0447879848, 0.2906912916, -0.0298283748, -0.7988186459, 0.0058281324, 0.726254721, 0.3562042626, -0.3120267574, 0.8421206902, -0.212862454, 0.6189074189, -0.2039265946, -0.0323719937, -0.7472415034, 0.076578951, -0.5548864554, -0.080983128, -0.4268444029, -0.3314908647, -0.3450699883, -0.837835838, -0.6631648315, 0.3534883137, -0.0905174897, 0.4320517301, 0.2634755817, 0.1041337611, 0.5317238278, 0.1966695968, -0.819489086, -0.5033619048, 0.8572026472, 0.8834983035, -0.705205432, 0.1600894701, -0.6932033988, -0.4498729731, -0.0107653388, 0.0917790491, -0.0738567678, -0.5948581098, 0.7869941461, -0.0973656248, -0.2468998, 0.0888436591, -0.9550156761, 0.5884263849, 0.7403404907, -0.7534127942, -0.8378260684, 0.4673689219, 0.3159858507, -0.386907147, 0.9441915182, 0.6564115461, -0.4906874679, -0.3458080056, -0.4446414306, 0.0976073561, 0.8862023791, -0.3371455759, 0.1875867477, 0.7179445148, 0.055504275, 0.0626218305, 0.7109979585, -0.9604920139, 0.780351594, 0.941345348, 0.3633277413, 0.1733565876, 0.7455275076, -0.0710289856, 0.8582062544, -0.2562763594, 0.0347936959, 0.4097722831, 0.7970730997, 0.5373491475, -0.8038304494, -0.710654741, 0.0404364192, 0.3627491115, -0.6392244173, 0.009328227, -0.9526163228, -0.1381623462, -0.4220812411, 0.5326290827, 0.6210118242, 0.2483525496, -0.7799804582, -0.0813618438, -0.1296666549, -0.4363115418, 0.7948842793, -0.5292992105, -0.0110350153, -0.1859661477, -0.1884187335, -0.8633178202, 0.1339820256, 0.4322552827, 0.8431290611, -0.3142345666, -0.9182339515, 0.7026145308, -0.4813556855, 0.3457843612, 0.6500383809, 0.6579552692, 0.9838001123, -0.588094591, 0.3206663771, 0.653038129, -0.985019519, 0.6358617179, 0.1535077939, 0.8314258018, -0.1097736001, -0.5123079994, -0.0017278292, 0.1073329649, -0.5346381066, 0.5929915782, -0.209081004, 0.6592260225, 0.5507210258, 0.6245791426, 0.0687209587, -0.8463991246, 0.0977543095, 0.5827126473, -0.6850994135, -0.4643015431, -0.9588554418, -0.8717246241, 0.80415384, -0.5347964948, -0.790048588, -0.3909993281, -0.8971383702, -0.4653276547, 0.8000107276, 0.038679251, 0.7622988614, -0.3252407272, 0.4220058561, 0.9649933772, 0.7496140263, 0.6280469166, 0.8803431317, 0.4745026145, -0.2367455248, 0.3032070563, -0.0863122843, -0.1349533001, 0.2002974782, -0.5901356049, -0.4073363512, -0.6385308745, -0.5046518433, 0.2012606706, 0.5076578406, 0.9075006563, -0.0938475957, 0.8131861192, -0.1496730089, 0.5571284115, 0.5213860504, 0.4019275668, 0.5389601046, -0.0597002576, -0.7469470444, -0.9663781645, 0.9095957661, -0.2729320104, 0.5782229908, 0.9076444627, -0.9091710522, 0.0480456208, 0.5273295797, -0.557893331, 0.1293180944, 0.5973625693, 0.6068568368, -0.9794069817, -0.1452798905, -0.7919460804, 0.9626543782, -0.322330617, -0.575646757, 0.6177948628, -0.2266641572, -0.5948192028, -0.2702827357, 0.2714938816, 0.6380823635, -0.098977462, -0.2712865431, -0.8695115018, 0.846645194, 0.4303237365, 0.1052665008, -0.0376468091, 0.4371910018, -0.4103728297, -0.3970140169, 0.523865355, 0.9555398403, -0.7067784368, 0.3750723728, 0.0635619243, 0.3068013765, -0.6287592024, 0.8846678184, 0.9532998921, 0.0150810354, 0.4196363107, -0.1500298125, 0.0349070807, 0.8483455674, 0.4258244035, 0.5763671042, 0.1248187419, -0.1807236258, 0.7727977083, -0.4503643231, -0.6157812344, -0.2411988411, -0.7103944997, 0.286716296, -0.4349594896, 0.9346802784, 0.9865957992, -0.8636838849, 0.7867638989, -0.8670819401, 0.1301591728, 0.1011523237, 0.7263709808, 0.4121708625, -0.202224556, -0.1947637606, -0.875855931, 0.1337423274, -0.6791257736, -0.2711194788, 0.3676658996, -0.218319873, 0.9691738654, 0.6781975067, -0.3114937382, 0.4850699154, -0.1964605577, 0.9636281356, -0.4445884533, 0.9092310108, -0.6650815213, 0.3285424967, -0.3814419952, -0.940506977, -0.1102178204, 0.503722796, -0.3747368927, 0.9176530474, 0.4899590181, 0.8223721328, 0.8407190534, 0.1361428141, 0.0818236028, -0.9545913813, -0.5564671417, 0.9539981456, 0.3471828957, 0.3570109733, -0.1275157049, -0.1700543087, 0.6371666163, -0.0720662536, -0.4203660346, -0.4457811422, -0.0931320559, -0.2934701374, -0.3820898772, -0.323715598, -0.4275700522, -0.0438588592, 0.360048237, -0.4588052321, -0.671301321, -0.0525720376, -0.9279696131, -0.1801528312, -0.6507735828, 0.7133522302, 0.8823456261, 0.2851198005, -0.1631706949, 0.8518527457, 0.2468117882, -0.7895837882, -0.1587719802, 0.690125903, -0.7896394216, -0.2675571112, 0.8478003637, -0.0317075462, 0.1810673332, 0.9320295285, 0.2353542481, -0.5679794101, -0.0539512555, 0.460535458, -0.9550147978, -0.7952772378, -0.4743494985, -0.2994805031, 0.3717634181, 0.8718745149, 0.085597469, -0.924271251, -0.7401817067, 0.6244734794, -0.9883315125, 0.4157811913, 0.8853088011, -0.023604332, 0.8308531855, 0.1599642118, -0.0508495276, 0.4957847984, 0.0904491698, -0.8946845, 0.2444719278, 0.047751715, -0.3722055626, 0.7724113463, 0.9375427486, 0.1118455339, 0.897182173, 0.9618058828, -0.8301989771, -0.771391319, 0.8920301087, -0.2675704245, 0.3668266094, -0.734701774, 0.6276148621, 0.4424634713, 0.203566901, 0.60873079, 0.787767792, 0.9870652091, 0.8157206419, 0.3192303224, 0.9797717538, -0.3660971585, -0.9645464169, 0.3536867198, -0.2538425975, 0.8463709382, -0.6539891351, -0.9749032725, -0.8709728214, -0.7148991058, -0.4662318125, -0.1872078428, 0.9758460354, -0.8065397692, 0.6943145169, -0.3181270777, -0.8227056963, 0.1360684899, -0.4756732711, 0.818289766, -0.3398003128, 0.0615019291, 0.9937810879, -0.9009038731, -0.4896788856, 0.6831765043, -0.7194574856, 0.3643664622, 0.7815093872, 0.5997038016, 0.6161759941, 0.1401946354, -0.05898957, -0.8717630542, 0.3562752415, 0.7658272394, 0.9594591036, -0.3985943093, -0.9874428781, 0.9784497963, 0.8328149076, -0.2203961728, -0.4367790955, -0.2985206681, -0.4396018085, 0.3533625833, -0.5900802694, 0.341296219, -0.3332176522, 0.9692768371, -0.5220827216, 0.7948070652, 0.0274355332, 0.9579614261, -0.8392309657, 0.8120907293, -0.9098925329, 0.888657201, -0.4354084802, 0.0746423309, 0.3428944775, -0.2961424223, 0.1394541753, 0.2649224816, 0.022512713, -0.4960952818, 0.6667445775, 0.5572495905, -0.3168046313, -0.653767526, 0.5807525551, 0.1172617223, 0.9313895059, -0.1634609211, -0.8516299035, -0.4198516232, -0.3516498233, -0.8824017718, 0.5925449876, 0.3805535572, -0.334678888, 0.8489016042, 0.8190881162, -0.5849518197, 0.0794881047, 0.6118067734, 0.6199430188, -0.7191067672, -0.8835372645, -0.6633683386, 0.5284382159, 0.1745911805, 0.6268207867, -0.5236071709, 0.3126383411, -0.7368229077, -0.0310288831, -0.6834431271, -0.477334297, 0.8784969318, 0.5408901524, 0.220384196, -0.7657701903, 0.1186065893, -0.8390119308, 0.1898047389, -0.6719087538, 0.8857122445, -0.2968276857, 0.8084502983, 0.4633463963, 0.9076681677, -0.7729784473, 0.4529964418, 0.3160163757, -0.9658216704, -0.8830955345, -0.922230862, -0.2385566985, -0.417184564, 0.6992953139, -0.6551671446, 0.8648582287, -0.2153024931, 0.5166012782, 0.9275273755, 0.144442624, 0.188774143, 0.742466838, 0.9546750607, -0.749692194, 0.1203382337, -0.4913676025, -0.8525958536, 0.3440210285, -0.679194413, -0.9007293507, 0.3389610487, -0.9464689325, 0.4178055885, 0.6066188354, 0.426719533, 0.9843498589, -0.8518005851, -0.9589831503, 0.0036001443, 0.5086507944, 0.3023825238, 0.393819099, 0.2487596689, 0.9200731609, -0.7277081906, 0.2936671438, 0.158561112, 0.0432858062, 0.1700297125, -0.2898014399, -0.6005441898, 0.2916651849, -0.3425426629, 0.8270194846, 0.3347794653, 0.3082692378, 0.3087521732, -0.608231833, -0.3112883453, 0.3586296799, -0.521573209, 0.4844437062, -0.755631253, -0.1090600114, 0.3965378298, -0.064516461, 0.4395516233, 0.8368475585, -0.1311561098, -0.7296384069, -0.0872039269, 0.2293750202, 0.8655481357, -0.2357160511, -0.296788599, 0.0444337209, -0.4167959315, -0.211687042, 0.863419271, -0.3393007439, -0.6352930328, 0.6836761775, 0.7111569558, 0.2530864818, -0.8340308032, 0.3928579704, 0.4957693031, -0.3704522733, -0.8946258444, -0.0627843743, 0.2517336324, -0.0203756518, -0.257012908, -0.3041118436, -0.8435347992, 0.4422727755, 0.3812433711, 0.0099028614, 0.1580656605, 0.1531327251, -0.4287747589, 0.6601558689, 0.0328685031, -0.9442701824, 0.7180057381, -0.0514063579, 0.941541152, -0.411703278, -0.8895641975, -0.453136875, -0.1839710582, 0.4824959102, -0.8326466493, -0.5879230469, -0.3731539442, -0.607682213, -0.3607878766, -0.4967151431, 0.1171505754, 0.7487898123, -0.1686304329, -0.660904737, 0.0568009033, 0.6704206074, 0.9303326541, 0.0193145727, 0.7108523537, -0.5993937243, -0.521392361, 0.3158566408, -0.0754556093, -0.2364707083, -0.6759965511, 0.100022092, 0.2480017651, 0.8923698049, -0.5082693563, -0.7191913238, 0.257892965, -0.6725517109, -0.2970493647, 0.8197087263, 0.5636855054, -0.1487921109, -0.3375444046, -0.9579308815, 0.8208756437, -0.3991976359, 0.3118870255, 0.0743684699, -0.0611052285, 0.6284373624, -0.6956431557, 0.7554478905, -0.3904603903, 0.076850249, 0.818235374, -0.4798019135, 0.567030343, -0.8908548336, 0.8678258638, 0.1605983661, 0.5581113461, -0.3549006848, 0.1711727079, 0.2770791246, 0.041870018, 0.4798587176, 0.3216662357, 0.1630457226, 0.9331258321, 0.3503489296, -0.0186898005, -0.2377999282, 0.9262788593, -0.1795473514, 0.9476937139, 0.6248090591, 0.6887080491, 0.0478785639, 0.4282262947, 0.4251826859, -0.5183609265, 0.9763299758, 0.3830381405, 0.024246953, -0.1917059232, 0.629531212, 0.4560597061, -0.331240148, 0.0865316443, 0.8620170401, 0.6036645759, 0.5107744986, 0.3931568411, 0.9987039473, -0.3367461242, -0.9195545772, 0.1221030714, 0.0453695473, -0.2723389004, -0.336183313, 0.6006685885, 0.3104948929, 0.8575391499, -0.1210182175, 0.3101971472, -0.4949874391, 0.7271503833, -0.272511589, 0.0624599983, 0.0171973198, 0.0927899941, 0.1983003976, 0.734772167, 0.7614510589, 0.076792303, -0.4902296977, 0.7439117617, -0.1835383378, -0.5536509909, 0.5014450809, -0.3590198445, 0.2781098063, -0.495294187, -0.2085321914, 0.8106588376, 0.877903806, 0.7535105291, -0.0757892128, 0.9904522747, 0.7791952471, -0.0831191768, -0.8799999151, -0.352736659, -0.3218909909, 0.3187525809, -0.693895487, 0.5070567799, 0.2310857071, -0.9032821804, -0.2110297574, 0.6662215421, -0.499985974, 0.1313792333, -0.8659196887, 0.9206820698, -0.3617209016, 0.4061599352, -0.9119005492, 0.6118861929, 0.8723812866, 0.2551609442, 0.801135661, 0.7364569994, -0.5368292041, -0.7238076514, 0.1146863062, -0.045652159, -0.6457649477, 0.8564942106, 0.974412363, 0.3882025664, 0.4220415733, 0.7247107801, 0.0194085972, -0.1503154399, -0.7168131516, -0.4648710543, 0.2301066235, 0.931985273, -0.894597481, -0.3494055985, -0.3355022712, -0.1036022935, -0.0580245243, -0.6656453105, -0.9142856132, -0.5930469137, 0.2492430216, 0.0245804167, 0.2685624479, 0.5049609679, -0.6370714026, -0.1932508932, 0.0008917213, 0.1486163322, 0.8583466559, 0.4737718168, -0.0813642019, 0.3054599973, -0.483238722, 0.7842919732, 0.5604579447, 0.0695354143, -0.6250502633, 0.8498888695, 0.034270396, 0.0774676917, 0.355366972, -0.9012827705, 0.4204514788, -0.9145411755, 0.3812415597, 0.7331594172, 0.1372731715, 0.0616574339, -0.1801575689, -0.958660705, 0.9571280042, -0.1428035186, -0.3754108135, 0.8821689207, 0.0159694492, 0.1591408714, 0.8921688143, 0.8131290142, 0.7709328056, 0.9430975923, -0.4077014045, 0.4220534411, 0.1746509109, 0.688534648, 0.5557842085, 0.2104492184, -0.7751054502, -0.4985797394, -0.3869690529, 0.3760376421, 0.3882387408, 0.316921855, -0.3270514539, -0.7373282349, -0.0340748872, 0.4786666257, -0.5626937214, -0.9369343416, -0.7239447645, 0.8519724607, 0.1454454778, -0.7016618446, -0.6656771468, 0.5605261426, 0.1793240091, -0.5987816619, 0.1752650883, 0.0342735271, -0.9439710816, -0.3449314029, 0.4919219704, 0.9700685954, -0.2825503039, -0.3730029489, 0.4400903431, 0.236868831, 0.3865330477, -0.3729074268, -0.9075004141, -9.27518e-5, -0.3716490843, 0.5864951096, -0.1808372592, -0.1805904513, 0.6219937008, 0.64166354, 0.5711536685, -0.4542466828, 0.0335311997, 0.5410318242, 0.6398349812, -0.794919378, 0.4147373687, -0.2822950209, 0.5452431289, -0.94316654, -0.9637720557, 0.5508559633, -0.9396251058, -0.906269527, -0.1949577635, -0.0934931641, 0.734295816, 0.9317750483, 0.4038279575, 0.5843178945, 0.7240507257, -0.8715349146, -0.5792990791, -0.1532728202, 0.9250978063, -0.3112050552, 0.4772073149, 0.1043220819, -0.0036427858, -0.827444815, -0.7251257448, -0.0174314673, 0.2797434736, 0.7038725744, 0.8066982216, 0.3465521081, -0.8549640727, 0.4829910274, -0.0988701978, 0.9873841861, 0.0926229018, -0.0003951401, -0.2051483342, -0.0202780892, 0.8369489125, -0.4925374824, -0.2595255204, -0.8327411533, 0.5406706769, -0.3867034118, 0.7407232866, -0.5633511113, 0.8357306979, -0.5134770328, -0.3806439756, 0.8365161325, -0.7965237348, 0.512635228, 0.3158547177, -0.4805227674, 0.5517313171, -0.9471638705, -0.3807925654, 0.3446227281, 0.4288297516, 0.3122537422, -0.1444026675, -0.7747556622, 0.6013140881, 0.1861713385, -0.5807876473, -0.4475133891, 0.4348704086, 0.5287180178, 0.2955415283, 0.5664899003, -0.0194430319, 0.4440847689, 0.7616779691, -0.812554256, -0.3887038032, 0.9974537231, -0.5975692391, -0.2603626741, -0.05905153, 0.0608999231, -0.0819958472, 0.6442591584, -0.0377778881, 0.1260795151, 0.9505397053, -0.6838508135, -0.0031759948, -0.7513235462, 0.5004040988, -0.8021258459, 0.2320097914, 0.6787467095, -0.1638029083, 0.2539011516, 0.1443508208, -0.6769410417, 0.545739603, 0.0715942937, -0.4299094749, 0.7409360501, 0.1799691381, -0.664468862, -0.7717294198, -0.6089490483, -0.2674417259, 0.2358848449, 0.0190576534, -0.2319714265, -0.6496538788, 0.4161463275, 0.3237385775, 0.9647927265, -0.0868850802, 0.3751485149, 0.4684514149, 0.2683282351, -0.5758807611, 0.8575263125, 0.6599915752, -0.7460357844, 0.5675359608, -0.1597634205, 0.9551872676, 0.992313805, 0.5538935277, 0.9311359748, -0.7134938239, 0.5924254086, 0.1301712939, 0.4867727698, 0.6365077391, -0.7960264933, 0.8928592074, 0.1243102695, -0.3022246032, 0.5002353487, -0.9866071902, 0.9952659411, 0.1048875698, 0.5507709689, 0.1364435326, 0.6294877406, -0.3550696025, -0.1524227062, 0.0954602943, 0.1813149802, 0.5270599031, 0.639200325, 0.2204483753, 0.1601238312, -0.7461549108, -0.5430502647, 0.1199910739, -0.2102702145, -0.1587366625, 0.4506079319, -0.7288747112, 0.5675965322, -0.5253905596, 0.3103890528, -0.9170982726, 0.7542628906, -0.4126414952, -0.9330553086, -0.3926181725, -0.3025442694, -0.8729292126, -0.1233005585, 0.6038547119, -0.0656445246, 0.4229331181, -0.2314912329, -0.6599904558, 0.2253656644, 0.2076221207, 0.4336726765, -0.6000207894, 0.8988902997, -0.8414512714, 0.0269415188, 0.3232001454, -0.7835605665, -0.3534658939, 0.0398076498, -0.9921882553, -0.1573359115, 0.0927967593, 0.193958432, 0.1201651279, -0.4282141204, 0.8487288811, 0.1835439965, -0.8825295586, 0.9618102945, 0.4804698981, -0.6294991847, -0.7783726723, 0.5531002709, 0.2588338932, -0.0722819097, -0.0230381102, -0.5593090977, 0.2158543557, -0.6639506107, 0.194340644, -0.2591301749, 0.8442204603, -0.4820398192, 0.8160069808, -0.5902038056, -0.8690784294, 0.3463872249, -0.5575260285, 0.837059684, -0.2226930769, 0.8832781156, 0.3934336516, 0.7678323909, -0.969221482, 0.0278780176, 0.3922907465, -0.9583652271, 0.3878861868, 0.3442726123, 0.7539554256, 0.6965631851, -0.5875310412, 0.7343854819, 0.9167642006, 0.5209926094, 0.7708643031, 0.3912260772, 0.631799788, 0.0635008808, -0.3555996424, 0.2583046301, -0.1176007693, -0.6195960108, 0.8673679837, 0.2272969425, -0.873793126, -0.167581963, 0.1693540603, -0.8528659855, -0.9628948066, -0.9606852988, -0.8465511854, 0.4758630802, -0.0057266685, -0.0274323444, -0.0632660403, -0.8611884415, -0.9255277142, -0.0216498296, -0.6040201483, 0.0791926622, 0.8501204661, -0.1803754136, 0.860650706, -0.209282722, -0.0467886082, 0.1721891478, 0.1381760366, 0.9760290533, -0.9910186455, -0.6130460024, -0.288200461, 0.6129895512, -0.5913135389, -0.8606866411, -0.8883732855, -0.5688685521, 0.8554927585, 0.3406473283, 0.3546710756, -0.8077334351, -0.0661034235, -0.2789128475, 0.8779431963, 0.0209148037, -0.2305655643, -0.3564512606, 0.4441422901, 0.9162257248, 0.7011777236, -0.6200633885, -0.8351485561, 0.8920083874, -0.9532184871, 0.528058403, 0.8445577686, 0.0755462, -0.9426736505, 0.8320814827, -0.1605720404, 0.6663873874, 0.8442639913, -0.5133023223, -0.7513481629, -0.1851890018, 0.041577254, -0.2182392344, 0.8515969309, -0.3101769329, -0.8151095313, -0.5027494158, 0.845458229, 0.370804018, 0.7142346509, 0.2634280293, -0.0970246471, 0.7643928517];

        $prompt_tokens = $this->countTokens(self::MODEL, $input);

        return new Embedding(
            $embedding,
            $prompt_tokens,
            $prompt_tokens
        );
    }

    public function countTokens(Enums\Model $model, string $input): int
    {
        $result = Process::run(
            'python3 '
            .base_path()
            .'/storage/scripts/count_tokens.py '
            .'cl100k_base '
            .'"'.$input.'"'
        );

        return intval($result->output());
    }
}
